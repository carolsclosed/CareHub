@using CareHub.Controllers
@using Microsoft.AspNetCore.Server.Kestrel.Core
@using Microsoft.EntityFrameworkCore.Query.SqlExpressions
@model List<CareHub.Controllers.Diagnosticos.InfoDiagnostico>

@{
    ViewBag.Title = "title";
    Layout = "_Layout";
  var grupos = Model
        .GroupBy(d => d.Categoria)
        .OrderBy(g => g.Key);

}

@{
  }
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3">
      @foreach (var grupo in grupos)
      {
          var collapseId = $"cat-{grupo.Key.GetHashCode()}";

          <div class="col">
              <div class="card h-100 shadow-sm">
                  <div class="card-body">
                      <h5 class="card-title">
                          <a class="text-decoration-none" data-bs-toggle="collapse" href="#@collapseId" role="button" aria-expanded="false">
                              @grupo.Key
                          </a>
                      </h5>

                      <div class="collapse" id="@collapseId">
                          <div class="dropdown-menu d-block position-static p-2 shadow rounded" style="max-height: 200px; overflow-y: auto;">
                              @foreach (var proc in grupo)
                              {
                                  <a class="dropdown-item" href="#">@proc.Nome</a>
                              }
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      }
  </div>
